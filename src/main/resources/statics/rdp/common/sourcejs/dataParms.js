var settingForParms={view:{showLine:!1,addDiyDom:addDiyDomForParms,addHoverDom:addHoverDomForParms,removeHoverDom:removeHoverDomForParms},data:{simpleData:{enable:!0}},edit:{enable:!0,showRenameBtn:!1,showRemoveBtn:function(e,r){return 1==r.level},removeTitle:"删除",drag:{autoExpandTrigger:!0,prev:!1,inner:!1,next:!1,isCopy:!0,isMove:!1}},callback:{beforeDrag:beforeDragForParms,onClick:zTreeOnClickForParms,onDrop:onDropForParams,beforeRemove:zTreeBeforeRemoveForParms}};function onDropForParams(e,r,a,o,t,n){panel.parmSetting(e,a,o)}var tempLayeroForParms,zNodesForParms=[{id:0,name:"参数列表",open:!0}];function getDataParmsNodesByParam(e,r,a){return $.fn.zTree.getZTreeObj("dataParms").getNodesByParam(e,r,a)}function addDiyDomForParms(e,r){if(0==r.level){$("#"+r.tId+"_a").append('<button type="button" class="tb_btn" id="addParmBtn" onclick="addDataParms()">添加参数</button>')}}function zTreeOnClickForParms(e,r,a){}function beforeDragForParms(e,r){return 1==r[0].level}function zTreeBeforeRemoveForParms(e,r){return layer.confirm("确认删除参数  “"+r.name+"” 吗？",{btn:["确定","取消"]},function(e){$.fn.zTree.getZTreeObj("dataParms").removeNode(r),layer.alert("删除成功!")},function(e){layer.close(e)}),!1}function addHoverDomForParms(e,r){if(1!=r.level)return!1;var a=$("#"+r.tId+"_span");if(!(r.editNameFlag||0<$("#"+r.tId+"_editBtn").length)){var o="<span class='button edit' id='"+r.tId+"_editBtn' title='修改' onfocus='this.blur();'></span>";a.after(o);var t=$("#"+r.tId+"_editBtn");t&&t.bind("click",function(){return addDataParms(r),!1})}}function removeHoverDomForParms(e,r){if(1!=r.level)return!1;$("#"+r.tId+"_editBtn").unbind().remove()}function addDataParms(a){console.log(a),layer.open({type:1,area:["535px","510px"],title:"参数配置",content:$("#dataParmsInfo"),cancel:function(){},success:function(e,r){a?setDomAllVals(e[0],a):setDomAllVals(e[0])},end:function(){},btn:["添加","取消"],yes:function(e,r){a?editParmNode(r,a):addParmNode(r),layer.close(e)},btn2:function(e,r){layer.close(e)}})}function addParmNode(e){var r=getDomAllVals(e[0]),a=$.fn.zTree.getZTreeObj("dataParms"),o=a.getNodes(),t=$.extend(!0,{},r);t.name=r.parmCName,t.puuid=getPuuid("parm"),t=a.addNodes(o[0],t)}function editParmNode(e,r){var a=getDomAllVals(e[0]),o=$.fn.zTree.getZTreeObj("dataParms");(r=$.extend(!0,r,a)).name=a.parmCName,o.updateNode(r)}function addParmNodeForVal(e){var r=$.fn.zTree.getZTreeObj("dataParms"),a=r.getNodes(),o=$.extend(!0,{},e);return o.name=e.parmCName,o.puuid=getPuuid("parm"),o=r.addNodes(a[0],o)}function editParmNodeForNode(e){var r=$.fn.zTree.getZTreeObj("dataParms");e.name=e.parmCName,r.updateNode(e)}function getParmNodeForNodeTId(e){return $.fn.zTree.getZTreeObj("dataParms").getNodeByParam("puuid",e)}function removeForParms(e){$.fn.zTree.getZTreeObj("dataParms").removeNode(e),layer.alert("删除成功!")}